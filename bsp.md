BSPダンジョン基本生成
ナビゲーションへジャンプ検索へジャンプ

目次
1 BSPツリーを使った簡単な基本ダンジョン生成方法
1.1 BSPの構築
1.2 ダンジョンの構築
2 解説動画
BSPツリーを使った簡単なダンジョン生成方法
BSPの作成
まず、壁セルで埋め尽くされた長方形のダンジョンから始めます。このダンジョンを再帰的に分割し、各サブダンジョンがほぼ部屋の大きさになるようにします。ダンジョンの分割は次のような操作を用いる。

ランダムな方向を選ぶ : 水平または垂直に分割する
ランダムな位置を選ぶ (縦方向ならx、横方向ならy)
ダンジョンを2つのサブダンジョンに分割する
dungeon_bsp1.png 最初の分割の繰り返し。

これで2つのサブダンジョンAとBができた。両方に同じ操作を行うことができる。

dungeon_bsp2.png 2つ目の分割の繰り返し

分割位置を決めるとき、ダンジョンの境界線に近すぎないように注意しなければなりません。生成された各サブダンジョンの中に部屋を配置できるようにしなければならない。最下層のサブダンジョンが生成したい部屋の大きさとほぼ同じになるまで、これを繰り返す。

dungeon_bsp3.png 4回分割を繰り返した後

分割位置のルールが異なると、均質なサブダンジョン (位置は 0.45 から 0.55) や不均質なサブダンジョン (位置は 0.1 から 0.9) になることがあります。また、ダンジョンの一部でより深い再帰レベルを使用することで、より小さな部屋を得ることができます。

ダンジョンの構築
それでは、木の各葉にランダムな大きさの部屋を作る。もちろん、その部屋は対応するサブダンジョンに含まれていなければなりません。BSPツリーのおかげで、2つの部屋が重なることはありません。

dungeon_bsp4.png ツリーの葉の中にある部屋

廊下を作るには、ツリーのすべての葉をループして、それぞれの葉をその姉妹につなぎます。2つの部屋の壁が対面している場合は、まっすぐな廊下を使うことができます。そうでない場合は、Z字型の通路を使うことになります。

dungeon_bsp5.png レベル4のサブダンジョンを繋げる。

次に、ツリーを1レベル上げて、親サブリージョンと同じ作業を繰り返します。今度は、2つのサブリージョンを、2つの部屋、あるいは廊下と部屋、あるいは2つの廊下の間のリンクでつなげばよいのです。

dungeon_bsp6.png レベル3のサブダンジョンを接続する。

最初の2つのサブダンジョンAとBを接続するまでこの作業を繰り返します:

dungeon_bsp7.png いくつかの部屋が葉っぱ全体を埋め尽くすようにすれば、退屈しないダンジョンにすることもできます。

www.DeepL.com/Translator（無料版）で翻訳しました。